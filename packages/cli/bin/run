#!/usr/bin/env node

if (parseInt(process.version.split('.')[0].substring(1), 10) < 14) {
  console.error(`Node ${process.version} is not supported. Percy only ` + (
    'supports current LTS versions of Node. Please upgrade to Node 14+'));
  process.exit(1);
}

// avoid hoisting import statements so the above check can run first
const { percy, checkForUpdate } = await import('../dist/index.js');

await checkForUpdate();
await percy(process.argv.slice(2));
